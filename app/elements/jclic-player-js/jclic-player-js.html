<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="jclic-player-js">
  <template>
    <style>
      :host {
        @apply(--paper-dialog);
        @apply(--jclic-player-js);
        margin: 0 !important;
        padding: 0;
      }
      :host #playerDiv {
        width: 100vw;
        height: 100vh;
      }
    </style>
    <div id="playerDiv"></div>
  </template>
</dom-module>

<script>
  /* global $ */
  Polymer({
    is: 'jclic-player-js',
    properties: {
      options: {
        type: Object,
        value: {}
      },
      project: {
        type: String,
        observer: '_setProject'
      },
      fullscreen: {
        type: Boolean,
        value: false
      },
      _player: {
        type: Object,
        value: null,
        reflectToAttribute: false,
        notify: false
      }
    },
    _setProject: function (project) {
      if (!this._player) {
        this._player = new window.JClicObject.JClicPlayer($(this.$.playerDiv), this.options);
      }

      var thisPlayer = this._player;
      thisPlayer.initReporter().then(function () {
        thisPlayer.reset();
        if (project) {
          thisPlayer.load(project);
        }
      });

      if (project && this.fullscreen) {
        this._player.skin.setScreenFull(true);
      }
    }
  });
</script>
